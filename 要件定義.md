# 要件定義

## 1. プロジェクト概要
- 名称（仮）: Bonnou — なりたい自分に向けた内省支援アプリ
- 目的: 日々の煩悩や感情を可視化し、自己肯定感を高める習慣と対策アクションにより継続的な成長を支援する。
- 対応プラットフォーム: Web（レスポンシブ対応、スマートフォン利用を想定）

## 2. 想定ユーザーと課題
- 主なユーザー: 自己成長意欲が高く、目標達成や習慣化を阻害する思考・感情（煩悩）に悩む社会人。
- 現状の課題:
  - 感情や煩悩が曖昧なままで、対処すべきものが把握できない。
  - 自己肯定感を高める習慣がなく、目標達成に向けたモチベーション維持が難しい。
  - 対処アクションの効果を振り返る仕組みがないため、学習サイクルが回らない。

## 3. 提供価値と成功指標
- 提供価値: 気分と煩悩の変化を定量・定性の両面から可視化し、利用者自身が効果的なアクションを学習できる環境を提供する。
- 成功指標（KPI候補）:
  - 日次記録継続日数（デイリースタートコメント + 夜振り返りのセット記録率）
  - 煩悩スコア改善量（アクション前後の平均差分）
  - アクション実行率（煩悩発生に対してアクションが選択された割合）

## 4. 機能要件
### 4.1 長期目標管理
- 長期的な「成し遂げたい目標」「なりたい自分像」を登録・編集。
- 更新頻度は低め（月1程度）。変更履歴の保存は任意（MVPでは最新のみでも可）。

### 4.2 デイリースタートコメント
- 日次で「自己肯定感を高める自己イメージ」やその日の意気込みを記録。
- 気分スコア（10段階）を併記。
- 過去のコメントを参照できる履歴ビューを提供。

### 4.3 煩悩ログ
- 煩悩が湧いたタイミングで随時記録する。
- 煩悩エンティティは再利用可能とし、同じ煩悩が日をまたいで現れた場合でも同一IDで管理できるようにする。
- 記録項目: 発生日時、テキストメモ、煩悩スコア（10段階）、関連タグ（任意）。
- アクション選択前後のスコア比較: 記録時に「アクション前スコア」を保存し、アクション後または日次振り返り時に「アクション後スコア」を追加入力できるようにする。

### 4.4 アクション管理
- ユーザーが事前にアクションテンプレート（例: 「30分瞑想」）を登録・編集・削除できる。
- 煩悩記録時に、登録済みアクションから選択して実施ログを残す。
- ログには「実行日」「関連煩悩ID」「アクション前後スコア差」「実行後コメント（任意）」を紐付ける。

### 4.5 日次振り返り
- 1日の終わりに以下を記録:
  - 良かったこと3つ
  - 感謝したいこと3つ
  - 煩悩スコア（振り返り時点の再評価が可能）
- デイリースタートコメントと組み合わせた日次ダッシュボードを表示し、当日記録の抜け漏れを通知（将来検討）。

### 4.6 分析・可視化
- 日付ごとの折れ線グラフやヒートマップで、気分スコア・煩悩スコアの推移を表示。
- アクション別の効果測定カード:
  - 平均スコア改善値
  - 実行回数 / 実行率
  - 実行後コメントの抜粋
- 将来的にフィルター（期間・アクションカテゴリ）を追加し、より詳細な内省を支援。

### 4.7 将来機能（後続検討）
- AI/コーチングによるアクション提案や内省ガイド。
- コミュニティ・コーチ共有機能。
- スマホネイティブアプリ展開。

## 5. データ要件
- 共通スコア: 10段階評価（0–9 または 1–10、導入時に定義）。
- 主なエンティティ:
  - Goal: タイトル、説明、作成日、更新日。
  - DailyStartComment: 日付、テキスト、気分スコア。
  - Bonnou: 発生日時、テキスト、タグ、スコア前後、関連アクション。再発した同一煩悩を再利用できるよう、同じエンティティを複数日で紐付け可能にする。
  - Action: 名称、説明、カテゴリ（任意）、作成日、更新日。
  - ActionLog: 実行日、関連Bonnou、アクションID、実行後コメント、前後スコア差。
  - Reflection: 日付、良かったこと×3、感謝×3、再評価スコア。
- 分析用途で日付単位の集計テーブルやロールアップビューを後続で検討。

## 6. 非機能要件
### 6.1 UI/UX
- モバイル優先設計（片手操作、主要操作を親指圏内に配置）。
- 記録導線を簡潔にし、朝・随時・夜の3シーンで迷わず入力できるナビゲーション。

### 6.2 セキュリティ
- 必須: HTTPS、認証（メール + パスワード または OAuth）、パスワード暗号化、静的ストレージ暗号化、バックアップとデータ削除フロー。
- アクセス制御とログ監査で検討すべき項目:
  - 認可: 管理者・一般ユーザーの権限分離（将来のサポート機能に備える）。
  - 操作ログ: 重要操作（目標編集、データ削除）の監査ログを保存。
  - アクセスログ: 異常アクセス検知、IP 制限や多要素認証の導入余地。
  - データポリシー: 保存期間、エクスポート、完全削除（忘れられる権利）を明文化。

### 6.3 パフォーマンス / 可用性
- 初期は小規模トラフィック想定。日次バッチ分析など将来拡張を見据えた設計。
- SLA はβ段階ではベストエフォート、正式ローンチ時に目標値（例: 稼働率 99%）を設定。

## 7. マネタイズ戦略（フリーミアム）
- 無料プラン: 基本記録機能（目標、デイリースタートコメント、煩悩ログ、日次振り返り）、直近30日分のグラフ表示。
- 有料プラン（月額サブスク想定）:
  - 全期間の分析機能、アクション効果の詳細レポート。
  - 将来的なAIコーチング、カスタムダッシュボード。
  - 優先サポートやデータエクスポート。

## 8. 今後の検討タスク
- データスキーマ詳細設計と画面遷移図の作成。
- MVP スコープの確定（初期リリースで提供する画面・機能の優先順位付け）。
- 分析画面のUIプロトタイピング（アクション効果カードのデザイン検討）。
- セキュリティ／プライバシーポリシー草案の作成。
- マネタイズの料金設定と無料→有料導線の検証。
